<div class="container mt-4">
  <h2> Reminders</h2>

  <!-- Add Reminder -->
  <div class="row mb-3 mt-3">
    <div class="col-md-3">
      <input type="text" class="form-control" placeholder="Title" [(ngModel)]="newTitle">
    </div>
    <div class="col-md-4">
      <input type="text" class="form-control" placeholder="Description" [(ngModel)]="newDescription">
    </div>
    <div class="col-md-3">
      <input type="datetime-local" class="form-control" [(ngModel)]="newDateTime">
    </div>
    <div class="col-md-2">
      <button class="btn btn-success w-100" (click)="addReminder()">Add</button>
    </div>
  </div>

  <!-- Reminder List -->
  <ul class="list-group">
    <li *ngFor="let reminder of reminders; let i = index" class="list-group-item d-flex justify-content-between align-items-center"
        [ngClass]="{'bg-light': i % 2 === 0, 'bg-white': i % 2 !== 0}">

      <!-- Normal view -->
      <div *ngIf="editIndex !== i">
        <input type="checkbox" [(ngModel)]="reminder.done" (change)="toggleDone(i)" class="me-2">
        <span [ngClass]="{'text-decoration-line-through text-muted': reminder.done}">
          <strong>{{ reminder.title }}</strong> - {{ reminder.description }} 
          <small class="text-secondary">({{ reminder.dateTime | date:'short' }})</small>
        </span>
      </div>

      <!-- Edit view -->
      <div *ngIf="editIndex === i" class="d-flex w-100 gap-2">
        <input type="text" class="form-control" [(ngModel)]="editedTitle">
        <input type="text" class="form-control" [(ngModel)]="editedDescription">
        <input type="datetime-local" class="form-control" [(ngModel)]="editedDateTime">
        <button class="btn btn-sm btn-success" (click)="saveEdit(i)">EDIT</button>
        <button class="btn btn-sm btn-secondary" (click)="cancelEdit()">DELETE</button>
      </div>

      <!-- Action buttons -->
      <div *ngIf="editIndex !== i">
        <button class="btn btn-sm btn-warning me-1" (click)="startEdit(i)">EDIT</button>
        <button class="btn btn-sm btn-danger" (click)="deleteReminder(i)">DELETE</button>
      </div>
    </li>
  </ul>

  <p *ngIf="reminders.length === 0" class="text-muted mt-3">No reminders yet. Add something!</p>
</div>
